:page-module-title: Spring Boot Transaction

include::ROOT:partial$header.adoc[]

=== Overview

.Structure of source
[source]
----
springboot-transaction
+- database
  +- oracle
    +- 1_user_script.sql
    +- 2_table_script.sql
\- springboot-transaction-multiple-datasource
----

=== What You Need

All demo in module `*{page-module-title}*` use Oracle database. So you can install via https://www.docker.com/products/docker-desktop/[Docker]

==== Docker Desktop

Open CMD (or PowerShell) and paste the following:

[,console]
----
docker run -p 1521:1521 -e ORACLE_PWD=ngocnhan -d --name oracle-db container-registry.oracle.com/database/free:latest
----

==== Docker Compose
. Create a file called docker-compose.yml in your project directory and paste the following:
+
.Oracle Docker
[,yaml]
----
services:
  oracle-db:
    container_name: "oracle-db"
    image: "container-registry.oracle.com/database/free:latest"
    ports: 
      - "1521:1521"
    environment:
      - ORACLE_PWD=ngocnhan

networks:
  default:
    name: elastic
    driver: bridge
----
+
. From your project directory, start up your application by running `docker compose up`.

[,console]
----
docker compose up
----

.Run script in folder `database/oracle` in following order
[NOTE]
===============================
* `1_user_script.sql`
* `2_table_script.sql`
===============================

=== Reference Guide
. https://docs.docker.com/[Docker]
. https://container-registry.oracle.com/[Oracle Container Registry]
. https://dzone.com/articles/most-common-spring-transactional-mistakes[Spring `@Transactional` Mistakes Everyone Makes]
. https://github.com/spring-projects/spring-data-commons/issues/2232[Deprecate ChainedTransactionManager]
. https://www.atomikos.com/Documentation/ConfiguringOracleForXA[Configuring Oracle for XA]
. https://spring.io/blog/2011/08/15/configuring-spring-and-jta-without-full-java-ee/[Configuring Spring and JTA without full Java EE]